<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="VHDeS.css">
</head>
<body class="BodySparkCykel">
<header>
<section class="Intro">
    <header>  
    <nav>
    <ul>   
        <li><a class="Logo" href="Index.html">Header Logo</a> </li>
       <li><a href="">link one</a></li>
        <li><a href="">link two</a></li>
       <li> <a href="">link three</a></li>
    </ul>
    </nav>
    </header>
    <section class="Hero">
        <h1 id="welcome">Välkommen</h1>
        <p class="inledning">Vår webbplats gör det enkelt att hyra elsparkcyklar snabbt och smidigt. Du hittar, låser upp och betalar direkt i mobilen, så att du kan ta dig runt på ett hållbart och flexibelt sätt – när det passar dig.</p>
       <button id="rentBtn" type="button">Hyr sparkcykel</button>
    <p id="rentStatus" aria-live="polite"></p>
    <p id="timer"></p>
</section>
</section>
   <script>
        //Tar ut URL:en så vi kan hämta 
        const params = new URLSearchParams(window.location.search);
        const text = document.getElementById("welcome");
        const date = new Date().toLocaleDateString();
        let username = params.get('username');
        if(username){
            text.textContent = `Välkommen ${username}!`;
        } 
        let tid = 60;
    const timer = document.getElementById('timer');
    const rentBtn = document.getElementById('rentBtn');
    const rentStatus = document.getElementById('rentStatus');
    let timerId = null;
    let rented = false;
    timer.textContent = `Tid kvar: ${tid} minuter`;
    rentBtn.addEventListener('click', function (event){
        if(!rented){
            rented = true;
            rentStatus.style.color = "green";
            rentStatus.textContent = "Du har hyrt en sparkcykel!";
            timerId = setInterval(function() {
                if (tid > 0) {
                    tid--;
                    timer.textContent = `Tid kvar: ${tid} minuter`;
                } 
                if(tid===0){
                    clearInterval(timerId);   
                    
                    timerId= null;
                    rented = false;
                    rentStatus.textContent = `Din hyra har löpt ut! Du hyrde en elsparkcykel ${date}`;
                rentStatus.style.color = "red";
                tid=60;
                timer.textContent = `Tid kvar: ${tid} minuter`;
                }


            }, 6);
        }
        else {
                   rented = false;
                   rentStatus.textContent = "Du har lämnat tillbaka sparkcykeln!";
                   rentStatus.style.color = "red";
                   if(timerId){
                    clearInterval(timerId);
                    timerId = null;
                   }
                   timer.textContent = `Tid kvar: ${tid} minuter`;
                }
    
    });
   </script>

</body>
</html>